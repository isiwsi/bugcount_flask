<!--
说明：
    本页为数字统计信息和
-->
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>统计图表-WeAdmin Frame型后台管理系统-WeAdmin 1.0</title>
        <meta name="renderer" content="webkit|ie-comp|ie-stand">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta http-equiv="Cache-Control" content="no-siteapp" />
		<link rel="stylesheet" href="../../../css/font.css">
		<link rel="stylesheet" href="../../../css/weadmin.css">
        <script src="../../../../lib/layui/layui.js" charset="utf-8"></script>
        <!--<script src="//cdn.bootcss.com/echarts/4.0.2/echarts.min.js"></script> --><!-- 引入echarts-->
        <script src="../../../js/echarts.min.js"></script> <!-- 引入echarts-->

        <!-- 折线图相关-->
        <script src="lib/esl.js"></script>
        <script src="lib/config.js"></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/facePrint.js"></script>
        <script src="lib/testHelper.js"></script>
        <link rel="stylesheet" href="lib/reset.css" />
        <!-- 折线图标题的样式-->
        <style>
            .test-title {
                /*background: #146402; */
                background: #fff;
                color: #fff; /* 文字颜色*/
                height:1px;
                /*line-height: 1px; /*当把 line-height 的高度设置和 height 高度一样就能使 文字垂直居中*/

            }
        </style>


    </head>
    <body>
        <!--  顶行 文字 start-->
		<div class="weadmin-nav">
        <a href="">首页 / </a>
        <a href="">系统统计 / </a>
        <a><cite>bug统计图</cite></a>
        <a class="layui-btn layui-btn-sm" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">
				<i class="layui-icon" style="line-height:30px">ဂ</i></a>
		</div>
        <!--  顶行 文字 start-->

        <!-- 提示文字 start-->
        <div class="weadmin-body" id="layui-body">

            <div>
                <blockquote class="layui-elem-quote">

                    说明：<br>
                    <div class="layui-row">
                        <div class="layui-col-xs6"><div class="grid-demo grid-demo-bg1">1）严重等级：1 非常严重，2 严重，3 普通（多数界面问题），4 轻微（优化项）</div></div>
                        <div class="layui-col-xs6"><div class="grid-demo">2) 优先等级：1 优先级最高，2 优先级中等，3 优先级一般</div></div>
                    </div>
                    <div class="layui-row">
                        <div class="layui-col-xs6"><div class="grid-demo grid-demo-bg1">3）难度等级：1 难，2 易</div></div>
                        <div class="layui-col-xs6"><div class="grid-demo">4）关闭情况：1 处理，2 关闭，3 回归，4 延迟</div></div>
                    </div>

                </blockquote>
            </div>
            <!-- 提示文字 send-->

            <!--  表格搜索框 start-->
            <!--<div class="demoTable layui-form layui-col-md12 we-search">-->
             <form class="layui-form" style="margin-bottom: 8px">
                  <span class="layui-input-inline"><input type="text" class="layui-input" id="startTime" placeholder="开始时间：yyyy-MM-dd" value="2020-01-01"></span>
                  <span class="layui-input-inline"><input type="text" class="layui-input" id="endTime" placeholder="结束时间：yyyy-MM-dd" value="2020-01-14"></span>
                  <div class="layui-input-inline">
						<select id="selector">
							<option  value="7">时间颗粒度</option>
							<option  value="90">季</option>
							<option  value="30">月</option>
							<option  value="7">周</option>
							<option  value="14">二周</option>
							<option  value="21">三周</option>
						</select>
                  </div>
                  <div class="layui-inline"><input class="layui-input" name="" id="" autocomplete="off" placeholder=" 搜索 BugID"></div>

                  <button class="layui-btn" lay-submit lay-filter="search">搜索 <i class="layui-icon">&#xe615;</i></button>
             </form>
             <!--  表格搜索框 end-->

            <!--  项目和开发维度的选项卡 start-->
            <div name="projectAndDeveloper">
            <!-- 弃用
            <fieldset class="layui-elem-field layui-field-title" hidden>
                <legend>项目和开发维度的选项卡</legend>
            </fieldset>
            <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" hidden>
                  <ul class="layui-tab-title">
                    <li class="layui-this">项目维度</li>
                    <li>开发维度</li>
                  </ul>
                  <div class="layui-tab-content" style="height: 100px;">
                    <div class="layui-tab-item layui-show">内容不一样是要有，因为你可以监听tab事件（阅读下文档就是了）</div>
                    <div class="layui-tab-item">内容2</div>
                  </div>
            </div>
             -->

            <div class="layui-collapse" lay-accordion="">
                  <div class="layui-colla-item">
                        <h2 class="layui-colla-title">项目维度</h2>
                        <!--  项目维度的数据都放在这个div start-->
                        <div id="project" name="project" class="layui-colla-content">
                                <blockquote class="layui-elem-quote" hidden>
                                    项目维度
                                </blockquote>

                                <!--  标签页 显示统计数据-->
                                <!-- 项目数据表格，用来查看画图数据的 start layui-tab-brief layui-tab-card-->
                                <div class="layui-tab layui-tab-brief">
                                      <ul class="layui-tab-title">
                                            <li class="layui-this">每日数据</li>
                                            <li>每日新增/关闭数据</li>
                                            <li>每日累计数据</li>
                                            <li>全部bug趋势图</li>
                                            <li>12级别bug趋势图</li>
                                      </ul>
                                      <div class="layui-tab-content">
                                            <div class="layui-tab-item layui-show">
                                                    <blockquote class="layui-elem-quote" hidden><div align="center">每日数据</div></blockquote>
                                                    <div class="layui-row">
                                                        <!-- 测试表格，x == bug数量(新增，关闭，回归，延迟)-->
                                                        <!-- 测试表格，y == 项目每天数据   -->
                                                        <table class="layui-hide" id="tableForDrawMapWithProject" lay-filter="tableForDrawMapWithProject"></table>
                                                    </div>
                                            </div>

                                            <div class="layui-tab-item">新增bug 增长/关闭数据(今天相对昨天)
                                                    <blockquote class="layui-elem-quote" hidden><div align="center">每日新增/关闭数据</div></blockquote>
                                                    <table class="layui-hide" id="tableForDrawMapWithProjectEverydayNewBugAddAndClose" lay-filter="tableForDrawMapWithProjectEverydayNewBugAddAndClose"></table>
                                            </div>

                                            <div class="layui-tab-item">
                                                    <blockquote class="layui-elem-quote" hidden><div align="center">每日累计数据</div></blockquote>
                                                    <div class="layui-row">
                                                        <!-- 测试表格，x == bug数量(新增，关闭，回归，延迟)-->
                                                        <!-- 测试表格，y == 项目每天数据   -->
                                                        <table class="layui-hide" id="tableForDrawMapWithProjectEverydaySum" lay-filter="tableForDrawMapWithProjectEverydaySum"></table>
                                                    </div>
                                            </div>

                                            <div class="layui-tab-item">
                                                <!-- 折线图 start-->
                                                <blockquote class="layui-elem-quote"><div align="center">1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等</div></blockquote>
                                                <div id="allBugMap1"></div> <!--  所有bug end-->
                                            </div>

                                            <div class="layui-tab-item">
                                                <!--  12bug start-->
                                                <blockquote class="layui-elem-quote"><div align="center">2）项目维度，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等</div></blockquote>
                                                <div id="Bug12Map1"></div>
                                                <!--  12bug end-->
                                            </div>
                                      </div>
                                 </div>
                                <!-- 项目数据表格，用来查看画图数据的 end-->



                        </div>
                        <!--  项目维度的数据都放在这个div end-->
                  </div>
                  <div class="layui-colla-item">
                    <h2 class="layui-colla-title">开发维度</h2>
                    <div class="layui-colla-content">
                      <p>有不少其他答案说是因为JS太差。我下面的答案已经说了，这不是根本性的原因。但除此之外，我还要纠正一些对JS具体问题的误解。JS当初是被作为脚本语言设计的，所以某些问题并不是JS设计得差或者是JS设计者的失误。比如var的作用域问题，并不是“错误”，而是当时绝大部分脚本语言都是这样的，如perl/php/sh等。模块的问题也是，脚本语言几乎都没有模块/命名空间功能。弱类型、for-in之类的问题也是，只不过现在用那些老的脚本语言的人比较少，所以很多人都误以为是JS才有的坑。另外有人说JS是半残语言，满足不了开发需求，1999年就该死。半残这个嘛，就夸张了。JS虽然有很多问题，但是设计总体还是优秀的。——来自知乎@贺师俊</p>
                    </div>
                  </div>

            </div>




            </div>
            <!--  项目和开发维度的选项卡 end-->



            <!-- 折线图 start-->
            <blockquote class="layui-elem-quote"><div align="center">1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等</div></blockquote>
            <div id="allBugMapWithProject"></div> <!--  所有bug end-->

            <!--  12bug start-->
            <blockquote class="layui-elem-quote"><div align="center">2）项目维度，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等</div></blockquote>
            <div id="Bug12MapWithProject"></div>
            <!--  12bug end-->

            <blockquote class="layui-elem-quote"><div align="center">项目维度，按时间（时间可自定义），按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭曲线；</div></blockquote>
            <div id="AddBugAddAndCloseStatusMapWithProject"></div>



        </div>
        <!-- body div end -->


<!-- ///////////////////////////////// 以下为脚本内容 -->
        <script>
            //--------------------------------------- 定义相关方法 start -------------------------------------------------------

            //渲染分页方法
            function renderElement(){
                layui.use('element', function() {
                    var element = layui.element;
                });
            }


            //渲染日历相关方法
            function renderLaydate(laydateId){ // 指向id

                layui.use(['laydate'], function() {
                    var laydate = layui.laydate;

                    //执行一个laydate实例
                    laydate.render({
                        elem: '#' + laydateId  //指定元素
                    });
			    });

            }

            //渲染table数据
            /*
            参数1： argElem              : 指向table的id
            参数1： argUrl               : url路径
            参数1： argStartTime         : 开始时间
            参数1： argEndTime           : 结束时间
            参数1： argTableRenderId     : 给渲染制定一个id,共其他监听调用
             */
            function renderTable(argElem, argUrl, argStartTime, argEndTime, argTableRenderId){
                layui.use('table',function () {
                        var table = layui.table;

                        <!-- tableForDrawMapWithProject 为了画图显示的表格 如果某个project是空，就赋值null -->
                        table.render(   {
                            elem: '#' + argElem //指向table的id
                            , url: argUrl
                            //, url: '../../../../json/test_project_map_allargs.json'
                            , method: 'get'
                            , loading: true //是否显示加载条（默认：true）
                            , where: {startTime: argStartTime, endTime: argEndTime}
                            , response: {
                                statusCode: 200
                            }
                            , cols: [[
                            {type: 'numbers', fixed: 'left'}//, fixed: true
                            , {checkbox: true, fixed: true}  //{type: 'checkbox'}
                            , {field: 'bug_submit_date', title: '时间', sort: true, width: 120}
                            , {field: 'project', title: '项目', sort: true, width: 80, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add', title: '新增', sort: true, width: 80}
                            , {field: 'close', title: '关闭', sort: true, width: 80}
                            , {field: 'regression', title: '回归', sort: true, width: 80}
                            , {field: 'delay', title: '延迟', width: 80}
                            , {field: 'add12', title: '新增(1-2级) ', sort: true, width: 120}
                            , {field: 'close12', title: '关闭(1-2级)', sort: true,  width: 120} //暂时先200
                            , {field: 'regression12', title: '回归(1-2级)', sort: true, width: 120}
                            , {field: 'delay12', title: '延迟(1-2级)', sort: true, width: 120}
                            , {field: 'total12', title: '总数(1-2级)', sort: true, width: 120}
                            , {field: 'bugCloseRate', title: 'bug解决率', sort: true, width: 120}
                            , {field: 'rank', title: '排名', sort: true, width: 80}
                            , {field: 'totalNum', title: '总数', sort: true, width: 80}

                            , {field: 'project0', title: '项目0名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project0', title: '项目0新增', sort: true, width: 120}
                            , {field: 'close_project0', title: '项目0关闭', sort: true, width: 120}
                            , {field: 'regression_project0', title: '项目0回归', sort: true, width: 120}
                            , {field: 'delay_project0', title: '项目0延迟', sort: true, width: 120}

                            , {field: 'project1', title: '项目1名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project1', title: '项目1新增', sort: true, width: 120}
                            , {field: 'close_project1', title: '项目1关闭', sort: true, width: 120}
                            , {field: 'regression_project1', title: '项目1回归', sort: true, width: 120}
                            , {field: 'delay_project1', title: '项目1延迟', sort: true, width: 120}

                            , {field: 'project2', title: '项目2名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project2', title: '项目2新增', sort: true, width: 120}
                            , {field: 'close_project2', title: '项目2关闭', sort: true, width: 120}
                            , {field: 'regression_project2', title: '项目2回归', sort: true, width: 120}
                            , {field: 'delay_project2', title: '项目2延迟', sort: true, width: 120}

                            , {field: 'project3', title: '项目3名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project3', title: '项目3新增', sort: true, width: 120}
                            , {field: 'close_project3', title: '项目3关闭', sort: true, width: 120}
                            , {field: 'regression_project3', title: '项目3回归', sort: true, width: 120}
                            , {field: 'delay_project3', title: '项目3延迟', sort: true, width: 120}

                            , {field: 'project4', title: '项目4名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project4', title: '项目4新增', sort: true, width: 120}
                            , {field: 'close_project4', title: '项目4关闭', sort: true, width: 120}
                            , {field: 'regression_project4', title: '项目4回归', sort: true, width: 120}
                            , {field: 'delay_project4', title: '项目4延迟', sort: true, width: 120}

                            , {field: 'project5', title: '项目5名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project5', title: '项目5新增', sort: true, width: 120}
                            , {field: 'close_project5', title: '项目5关闭', sort: true, width: 120}
                            , {field: 'regression_project5', title: '项目5回归', sort: true, width: 120}
                            , {field: 'delay_project5', title: '项目5延迟', sort: true, width: 120}

                            , {field: 'project6', title: '项目6名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project6', title: '项目6新增', sort: true, width: 120}
                            , {field: 'close_project6', title: '项目6关闭', sort: true, width: 120}
                            , {field: 'regression_project6', title: '项目6回归', sort: true, width: 120}
                            , {field: 'delay_project6', title: '项目6延迟', sort: true, width: 120}

                            , {field: 'project7', title: '项目7名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project7', title: '项目7新增', sort: true, width: 120}
                            , {field: 'close_project7', title: '项目7关闭', sort: true, width: 120}
                            , {field: 'regression_project7', title: '项目7回归', sort: true, width: 120}
                            , {field: 'delay_project7', title: '项目7延迟', sort: true, width: 120}

                            , {field: 'project8', title: '项目8名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project8', title: '项目8新增', sort: true, width: 120}
                            , {field: 'close_project8', title: '项目8关闭', sort: true, width: 120}
                            , {field: 'regression_project8', title: '项目8回归', sort: true, width: 120}
                            , {field: 'delay_project8', title: '项目8延迟', sort: true, width: 120}

                            , {field: 'project9', title: '项目9名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project9', title: '项目9新增', sort: true, width: 120}
                            , {field: 'close_project9', title: '项目9关闭', sort: true, width: 120}
                            , {field: 'regression_project9', title: '项目9回归', sort: true, width: 120}
                            , {field: 'delay_project9', title: '项目9延迟', sort: true, width: 120}

                            , {field: 'project10', title: '项目10名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project10', title: '项目10新增', sort: true, width: 120}
                            , {field: 'close_project10', title: '项目10关闭', sort: true, width: 120}
                            , {field: 'regression_project10', title: '项目10回归', sort: true, width: 120}
                            , {field: 'delay_project10', title: '项目10延迟', sort: true, width: 120}

                            , {field: 'project11', title: '项目11名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project11', title: '项目11新增', sort: true, width: 120}
                            , {field: 'close_project11', title: '项目11关闭', sort: true, width: 120}
                            , {field: 'regression_project11', title: '项目11回归', sort: true, width: 120}
                            , {field: 'delay_project11', title: '项目11延迟', sort: true, width: 120}

                            , {field: 'project12', title: '项目12名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project12', title: '项目12新增', sort: true, width: 120}
                            , {field: 'close_project12', title: '项目12关闭', sort: true, width: 120}
                            , {field: 'regression_project12', title: '项目12回归', sort: true, width: 120}
                            , {field: 'delay_project12', title: '项目12延迟', sort: true, width: 120}

                            , {field: 'project13', title: '项目13名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project13', title: '项目13新增', sort: true, width: 120}
                            , {field: 'close_project13', title: '项目13关闭', sort: true, width: 120}
                            , {field: 'regression_project13', title: '项目13回归', sort: true, width: 120}
                            , {field: 'delay_project13', title: '项目13延迟', sort: true, width: 120}



                        ]]
                            , id: argTableRenderId //给渲染制定一个id,共其他监听调用
                            , page: false
                            , height: 400
                        });
                });

            }

            /*
            方法                         ：项目维度，按时间（时间可自定义），按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭数据（bugstatus=1 / 2）；
            参数1： argElem              : 指向table的id
            参数2： argUrl               : url路径
            参数3： argStartTime         : 开始时间
            参数4： argEndTime           : 结束时间
            参数5： timeDifference       : 时间差/时间颗粒度（季度/月/周/二周/三周）
            参数6： argTableRenderId     : 给渲染制定一个id,共其他监听调用
             */
            function renderTableForDrawMapWithProjectEverydayNewBugAddAndClose(argElem, argUrl, argStartTime, argEndTime, timeDifference, argTableRenderId){
                layui.use('table',function () {
                        var table = layui.table;

                        <!-- tableForDrawMapWithProject 为了画图显示的表格 如果某个project是空，就赋值null -->
                        table.render(   {
                            elem: '#' + argElem //指向table的id
                            , url: argUrl
                            //, url: '../../../../json/test_project_map_allargs.json'
                            , method: 'get'
                            , loading: true //是否显示加载条（默认：true）
                            , where: {startTime: argStartTime, endTime: argEndTime,timeDifference: timeDifference}
                            , response: {
                                statusCode: 200
                            }
                            , cols: [[
                            {type: 'numbers', fixed: 'left'}//, fixed: true
                            , {checkbox: true, fixed: true}  //{type: 'checkbox'}
                            , {field: 'bug_submit_date', title: '时间', sort: true, width: 120}
                            , {field: 'project', title: '项目', sort: true, width: 80, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add', title: '新增', sort: true, width: 80}
                            , {field: 'close', title: '关闭', sort: true, width: 80}

                            , {field: 'project0', title: '项目0名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project0', title: '项目0新增', sort: true, width: 120}
                            , {field: 'close_project0', title: '项目0关闭', sort: true, width: 120}


                            , {field: 'project1', title: '项目1名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project1', title: '项目1新增', sort: true, width: 120}
                            , {field: 'close_project1', title: '项目1关闭', sort: true, width: 120}


                            , {field: 'project2', title: '项目2名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project2', title: '项目2新增', sort: true, width: 120}
                            , {field: 'close_project2', title: '项目2关闭', sort: true, width: 120}


                            , {field: 'project3', title: '项目3名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project3', title: '项目3新增', sort: true, width: 120}
                            , {field: 'close_project3', title: '项目3关闭', sort: true, width: 120}


                            , {field: 'project4', title: '项目4名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project4', title: '项目4新增', sort: true, width: 120}
                            , {field: 'close_project4', title: '项目4关闭', sort: true, width: 120}


                            , {field: 'project5', title: '项目5名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project5', title: '项目5新增', sort: true, width: 120}
                            , {field: 'close_project5', title: '项目5关闭', sort: true, width: 120}


                            , {field: 'project6', title: '项目6名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project6', title: '项目6新增', sort: true, width: 120}
                            , {field: 'close_project6', title: '项目6关闭', sort: true, width: 120}


                            , {field: 'project7', title: '项目7名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project7', title: '项目7新增', sort: true, width: 120}
                            , {field: 'close_project7', title: '项目7关闭', sort: true, width: 120}


                            , {field: 'project8', title: '项目8名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project8', title: '项目8新增', sort: true, width: 120}
                            , {field: 'close_project8', title: '项目8关闭', sort: true, width: 120}


                            , {field: 'project9', title: '项目9名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project9', title: '项目9新增', sort: true, width: 120}
                            , {field: 'close_project9', title: '项目9关闭', sort: true, width: 120}


                            , {field: 'project10', title: '项目10名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project10', title: '项目10新增', sort: true, width: 120}
                            , {field: 'close_project10', title: '项目10关闭', sort: true, width: 120}


                            , {field: 'project11', title: '项目11名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project11', title: '项目11新增', sort: true, width: 120}
                            , {field: 'close_project11', title: '项目11关闭', sort: true, width: 120}


                            , {field: 'project12', title: '项目12名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project12', title: '项目12新增', sort: true, width: 120}
                            , {field: 'close_project12', title: '项目12关闭', sort: true, width: 120}


                            , {field: 'project13', title: '项目13名称', sort: true, width: 120, style:'background-color: #009688; color: #fff;'}
                            , {field: 'add_project13', title: '项目13新增', sort: true, width: 120}
                            , {field: 'close_project13', title: '项目13关闭', sort: true, width: 120}
                        ]]
                            , id: argTableRenderId //给渲染制定一个id,共其他监听调用
                            , page: false
                            , height: 400
                        });
                });

            }

            //渲染折线图 获取所需参数----------------------------------------------------------
            // 1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等；后期传一个json
            /*
            参数1： legendData           : 折线图上方可以控制 是否显示折线的地方
            参数2： xAxisData            : xAxisData x轴数组
            参数3： seriesData           : seriesData 对应的具体数组
            返回值： json_str

             */
            function getRenderMapWithProjectByTimeAllBugArgs(startTimeFromForm, endTimeFromForm){
                // 测试异步请求,返回值给的错误，因此使用同步 get请求
                var $ = layui.jquery;

                //创建需要返回的json数据 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                var json_obj = {"legendData":[], xAxisData:[], seriesDataJson:[] };

                console.log("json_obj.lengendData=", json_obj.legendData);
                console.log("进入请求数据方法");

                $.ajax({
                            url: "/getTableForDrawMapWithProjectEverydaySum",
                            method: "get",
                            data:{"startTime":startTimeFromForm,"endTime":endTimeFromForm},
                            datatype:"json",
                            async:false,
                            success:function(josnstr){//jsonstr 格式
                                console.log("获取后台数据成功，解析数据");
                                console.log("获取后台数据成功，解析数据datas="+ josnstr);
                                console.log("获取后台数据成功，解析数据datas.type="+ typeof(josnstr));
                                console.log("jsonstringfy==" + JSON.stringify(josnstr.field));
                                returnDataJson = $.parseJSON(josnstr);
                                console.log("，returnDataJson="+ returnDataJson);
                                console.log("，returnDataJson.type="+ typeof(returnDataJson));

                                //获取渲染折线图所需数据
                                    //all bug
                                var xAxisDataFromServer = [];
                                var totoalNumArrFromServer = [];
                                var addNumArrFromServer = [];
                                var closeNumArrFromServer = [];
                                var regressionNumArrFromServer = [];
                                var delayNumArrFromServer = [];

                                //循环获取[{xx,xx}, {xx,xx}] json中的数据
                                $.each(returnDataJson.data,function (index, item) {
                                    console.log('i+item=' + index + " "+item.add);
                                    xAxisDataFromServer.push(item.bug_submit_date); //日期
                                    totoalNumArrFromServer.push(item.totalNum); //总数
                                    addNumArrFromServer.push(item.add); //新增
                                    closeNumArrFromServer.push(item.close); //关闭
                                    console.log(totoalNumArrFromServer);
                                    regressionNumArrFromServer.push(item.regression); //回归
                                    delayNumArrFromServer.push(item.delay); //延迟


                                });

                                var legendData = ['总数','新增','关闭','回归','延迟'];
                                var xAxisData = xAxisDataFromServer;
                                console.log("x轴数组" + xAxisData);

                                totoalNumArr = totoalNumArrFromServer;
                                addNumArr = addNumArrFromServer;
                                closeNumArr = closeNumArrFromServer;
                                regressionNumArr = regressionNumArrFromServer;
                                delayNumArr = delayNumArrFromServer;

                                var seriesDataJson = {"totoalNum": totoalNumArr, "add": addNumArr, "close": closeNumArr, "regression": regressionNumArr, "delay": delayNumArr};
                                console.log('json类型= ',typeof(seriesDataJson) );

                                //拼接json,返回参数数据
                                    //转成json 对象 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                                //创建需要返回的json数据 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                               // var json_obj = {"legendData":[], xAxisData:[], seriesDataJson:[] };


                                json_obj.legendData = legendData;
                                json_obj.xAxisData = xAxisData;
                                json_obj.seriesDataJson = seriesDataJson;

                                //console.log(json_obj);
                                //console.log("最终json数据==" + JSON.stringify(json_obj));

                                //return "haha"; // 这里不能写return,引发错误

                            },error:function(){
                                console.log("获取后台数据失败");
                            }
                        });


                /*
                $.get('/getTableForDrawMapWithProjectEverydaySum', function (josnstr) {
                    console.log("获取后台数据成功，解析数据");
                                console.log("获取后台数据成功，解析数据datas="+ josnstr);
                                console.log("获取后台数据成功，解析数据datas.type="+ typeof(josnstr));
                                console.log("jsonstringfy==" + JSON.stringify(josnstr.field));
                                returnDataJson = $.parseJSON(josnstr);
                                console.log("，returnDataJson="+ returnDataJson);
                                console.log("，returnDataJson.type="+ typeof(returnDataJson));

                                //获取渲染折线图所需数据
                                    //all bug
                                var xAxisDataFromServer = [];
                                var totoalNumArrFromServer = [];
                                var addNumArrFromServer = [];
                                var closeNumArrFromServer = [];
                                var regressionNumArrFromServer = [];
                                var delayNumArrFromServer = [];

                                //循环获取[{xx,xx}, {xx,xx}] json中的数据
                                $.each(returnDataJson.data,function (index, item) {
                                    console.log('i+item=' + index + " "+item.add);
                                    xAxisDataFromServer.push(item.bug_submit_date); //日期
                                    totoalNumArrFromServer.push(item.totalNum); //总数
                                    addNumArrFromServer.push(item.add); //新增
                                    closeNumArrFromServer.push(item.close); //关闭
                                    console.log(totoalNumArrFromServer);
                                    regressionNumArrFromServer.push(item.regression); //回归
                                    delayNumArrFromServer.push(item.delay); //延迟


                                });

                                var legendData = ['总数','新增','关闭','回归','延迟'];
                                var xAxisData = xAxisDataFromServer;
                                console.log("x轴数组" + xAxisData);

                                totoalNumArr = totoalNumArrFromServer;
                                addNumArr = addNumArrFromServer;
                                closeNumArr = closeNumArrFromServer;
                                regressionNumArr = regressionNumArrFromServer;
                                delayNumArr = delayNumArrFromServer;

                                var seriesDataJson = {"totoalNum": totoalNumArr, "add": addNumArr, "close": closeNumArr, "regression": regressionNumArr, "delay": delayNumArr};
                                console.log('json类型= ',typeof(seriesDataJson) );

                                //拼接json,返回参数数据
                                    //转成json 对象 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                                //创建需要返回的json数据 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                                //var json_obj = {"legendData":[], xAxisData:[], seriesDataJson:[] };

                                json_obj.legendData = legendData;
                                json_obj.xAxisData = xAxisData;
                                json_obj.seriesDataJson = seriesDataJson;
                                console.log(json_obj);
                                console.log("最终json数据==" + JSON.stringify(json_obj));

                                return json_obj;
                });

                 */
                //console.log("先打印了这条");
                //console.log("要返回数据 json数据==" + JSON.stringify(json_obj));// 数据是有的，要返还json_str格式,返回对象保存不住
                var json_str = JSON.stringify(json_obj);
                console.log('返回的json_str=', json_str);
                return json_str;

            }

            //渲染折线图----------------------------------------------------------
            // 1-1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等；后期传一个json
            /*
            参数1： legendData           : 折线图上方可以控制 是否显示折线的地方
            参数2： xAxisData            : xAxisData x轴数组
            参数3： seriesData           : seriesData 对应的具体数组

             */
            function renderMapWithProjectByTimeAllBug(legendData, xAxisData, seriesDataJson){
                    //先清空div中的数据 第一种：
                    document.getElementById('allBugMapWithProject').innerHTML = "";
                    //第二种：$('#bigDiv').html("");

                    var chart;
                    var myChart;
                    var option;

                    require([
                        'echarts'/*, 'map/js/china' */
                    ], function (echarts) {

                        var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'cross',
                                    crossStyle: {
                                        color: '#999'
                                    }
                                }
                            },
                            toolbox: {
                                feature: {
                                    dataView: {show: true, readOnly: false},
                                    magicType: {show: true, type: ['line', 'bar']},
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            legend: {
                                //data:['1808','LJG','ZG','test']
                                data: legendData,
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    //data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
                                    data: xAxisData,
                                    axisPointer: {
                                        type: 'shadow'
                                    }
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        //formatter: '{value} ml'
                                        formatter: '{value} 个'
                                    }
                                },
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        formatter: '{value} 个 '
                                    }
                                }

                            ],
                            series: [
                                {
                                    name:legendData[0],
                                    type:'line',
                                    //data:[22,26,67,70,71,77,83,84,150,153,179,208,219,220,257,267,268,269]
                                    data:seriesDataJson['totoalNum']
                                },
                                {
                                    name:legendData[1],
                                    type:'line',
                                    //data:[0,0,0,0,0,0,0,0,8,9,9,12,13,13,16,16,16,17]
                                    data:seriesDataJson['add']
                                },
                                {
                                    name:legendData[2],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[22,26,67,70,71,76,82,83,136,138,164,189,197,198,226,236,237,237]
                                    data:seriesDataJson['close']
                                },
                                {
                                    name:legendData[3],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,0,0,1,1,1,1,12,2,2,4,4,4,4]
                                    data:seriesDataJson['regression']
                                },
                                {
                                    name:legendData[4],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,1,1,1,5,5,5,6,7,7,11,11,11,11]
                                    data:seriesDataJson['delay']
                                }
                            ]
                        };

                        chart = myChart = testHelper.create(echarts, 'allBugMapWithProject', {
                            option: option,
                            lazyUpdate: false
                            //title: '1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等；'
                        });
                    });


            }


            //渲染折线图 获取12级别bug 参数----------------------------------------------------------
            // 2）项目维度参数，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等；后期传一个json
            /*
            参数1： legendData           : 折线图上方可以控制 是否显示折线的地方
            参数2： xAxisData            : xAxisData x轴数组
            参数3： seriesData           : seriesData 对应的具体数组
            返回值： json_str

             */
            function getRenderMapWithProjectByTime12BugArgs(legendData, xAxisData, seriesDataJson){
                var $ = layui.jquery;

                //创建需要返回的json数据 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                var json_obj = {"legendData":[], xAxisData:[], seriesDataJson:[] };

                console.log("json_obj.lengendData=", json_obj.legendData);
                console.log("进入请求数据方法");

                $.ajax({
                            url: "/getTableForDrawMapWithProjectEverydaySum",
                            method: "get",
                            data:{"startTime":startTimeFromForm,"endTime":endTimeFromForm},
                            datatype:"json",
                            async:false,
                            success:function(josnstr){//jsonstr 格式
                                console.log("获取后台数据成功，解析数据");
                                console.log("获取后台数据成功，解析数据datas="+ josnstr);
                                console.log("获取后台数据成功，解析数据datas.type="+ typeof(josnstr));
                                console.log("jsonstringfy==" + JSON.stringify(josnstr.field));
                                returnDataJson = $.parseJSON(josnstr);
                                console.log("，returnDataJson="+ returnDataJson);
                                console.log("，returnDataJson.type="+ typeof(returnDataJson));

                                //获取渲染折线图所需数据
                                    //12级bug参数
                                var xAxisDataWithProject12BugFromServer = [];
                                var totoalNumArrWithProject12BugFromServer = [];
                                var addNumArrWithProject12BugFromServer = [];
                                var closeNumArrWithProject12BugFromServer = [];
                                var regressionWithProject12BugNumArrFromServer = [];
                                var delayNumArrWithProject12BugFromServer = [];

                                //循环获取[{xx,xx}, {xx,xx}] json中的数据
                                $.each(returnDataJson.data,function (index, item) {
                                    console.log('i+item=' + index + " "+item.add);
                                    //1-2bug
                                    xAxisDataWithProject12BugFromServer.push(item.bug_submit_date); //日期
                                    totoalNumArrWithProject12BugFromServer.push(item.total12); //总数
                                    addNumArrWithProject12BugFromServer.push(item.add12);  //新增
                                    closeNumArrWithProject12BugFromServer.push(item.close12); //关闭
                                    regressionWithProject12BugNumArrFromServer.push(item.regression12); //回归
                                    delayNumArrWithProject12BugFromServer.push(item.delay12); //延迟

                                });

                                var legendDataWithProject12Bug = ['总数(1-2级bug)','新增(1-2级bug)','关闭(1-2级bug)','回归(1-2级bug)','延迟(1-2级bug)'];
                                var xAxisDataWithProject12Bug = xAxisDataWithProject12BugFromServer;
                                totoalNumArrWithProject12Bug = totoalNumArrWithProject12BugFromServer;
                                addNumArrWithProject12Bug = addNumArrWithProject12BugFromServer;
                                closeNumArrWithProject12Bug = closeNumArrWithProject12BugFromServer;
                                regressionNumArrWithProject12Bug = regressionWithProject12BugNumArrFromServer;
                                delayNumArrWithProject12Bug = delayNumArrWithProject12BugFromServer;
                                var seriesDataJsonWithProject12Bug = {"totoal12": totoalNumArrWithProject12Bug, "add12": addNumArrWithProject12Bug, "close12": closeNumArrWithProject12Bug, "regression12": regressionNumArrWithProject12Bug, "delay12": delayNumArrWithProject12Bug};


                                json_obj.legendData = legendDataWithProject12Bug;
                                json_obj.xAxisData = xAxisDataWithProject12Bug;
                                json_obj.seriesDataJson = seriesDataJsonWithProject12Bug;

                            },error:function(){
                                console.log("获取后台数据失败");
                            }
                        });

                var json_str = JSON.stringify(json_obj);
                console.log('获取12级别bug,折线图参数，返回的json_str=', json_str);
                return json_str;
            }


            //2-1）项目维度，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等；
            function renderMapWithProjectByTime12Bug(legendData, xAxisData, seriesDataJson){
                    //先清空div中的数据 第一种：
                    document.getElementById('Bug12MapWithProject').innerHTML = "";
                    //第二种：$('#bigDiv').html("");

                    var chart;
                    var myChart;
                    var option;

                    require([
                        'echarts'/*, 'map/js/china' */
                    ], function (echarts) {

                        var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'cross',
                                    crossStyle: {
                                        color: '#999'
                                    }
                                }
                            },
                            toolbox: {
                                feature: {
                                    dataView: {show: true, readOnly: false},
                                    magicType: {show: true, type: ['line', 'bar']},
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            legend: {
                                //data:['1808','LJG','ZG','test']
                                data: legendData,
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    //data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
                                    data: xAxisData,
                                    axisPointer: {
                                        type: 'shadow'
                                    }
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        //formatter: '{value} ml'
                                        formatter: '{value} 个'
                                    }
                                },
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        formatter: '{value} 个 '
                                    }
                                }

                            ],
                            series: [
                                {
                                    name:legendData[0],
                                    type:'line',
                                    //data:[22,26,67,70,71,77,83,84,150,153,179,208,219,220,257,267,268,269]
                                    data:seriesDataJson['totoal12']
                                },
                                {
                                    name:legendData[1],
                                    type:'line',
                                    //data:[0,0,0,0,0,0,0,0,8,9,9,12,13,13,16,16,16,17]
                                    data:seriesDataJson['add12']
                                },
                                {
                                    name:legendData[2],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[22,26,67,70,71,76,82,83,136,138,164,189,197,198,226,236,237,237]
                                    data:seriesDataJson['close12']
                                },
                                {
                                    name:legendData[3],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,0,0,1,1,1,1,12,2,2,4,4,4,4]
                                    data:seriesDataJson['regression12']
                                },
                                {
                                    name:legendData[4],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,1,1,1,5,5,5,6,7,7,11,11,11,11]
                                    data:seriesDataJson['delay12']
                                }
                            ]
                        };

                        chart = myChart = testHelper.create(echarts, 'Bug12MapWithProject', {
                            option: option,
                            //title: '2）项目维度，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等；'
                        });
                    });
            }

            //渲染折线图 绘制新增bug增长和关闭曲线  参数----------------------------------------------------------
            // 3）项目维度，按时间（时间可自定义），按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭曲线
            /*
            参数1： legendData           : 折线图上方可以控制 是否显示折线的地方
            参数2： xAxisData            : xAxisData x轴数组
            参数3： seriesData           : seriesData 对应的具体数组
            返回值： json_str            : 返回值

             */
            function getRenderMapWithProjectByTimeAddBugAddAndCloseArgs(legendData, xAxisData, seriesDataJson){
                var $ = layui.jquery;

                //创建需要返回的json数据 legendData（表头）, xAxisData（x轴）, seriesDataJson（具体数据）
                var json_obj = {"legendData":[], xAxisData:[], seriesDataJson:[] };

                console.log("json_obj.lengendData=", json_obj.legendData);
                console.log("进入请求数据方法");

                $.ajax({
                            url: "/getTableForDrawMapWithProjectEverydayNewBugAddAndClose",
                            method: "get",
                            data:{"startTime":startTimeFromForm,"endTime":endTimeFromForm},
                            datatype:"json",
                            async:false,
                            success:function(josnstr){//jsonstr 格式
                                console.log("获取后台数据成功，解析数据");
                                console.log("获取后台数据成功，解析数据datas="+ josnstr);
                                console.log("获取后台数据成功，解析数据datas.type="+ typeof(josnstr));
                                console.log("jsonstringfy==" + JSON.stringify(josnstr.field));
                                returnDataJson = $.parseJSON(josnstr);
                                console.log("，returnDataJson="+ returnDataJson);
                                console.log("，returnDataJson.type="+ typeof(returnDataJson));

                                //获取渲染折线图所需数据
                                    //项目-新增bug增长和关闭参数
                                var xAxisDataWithProjectNewAndCloseBugFromServer = [];
                                var totoalNumArrWithProjectNewAndCloseBugFromServer = [];
                                var addNumArrWithProjectNewAndCloseBugFromServer = [];
                                var closeNumArrWithProjectNewAndCloseBugFromServer = [];


                                //循环获取[{xx,xx}, {xx,xx}] json中的数据
                                $.each(returnDataJson.data,function (index, item) {
                                    console.log('i+item=' + index + " "+item.add);
                                    //项目-新增bug增长和关闭
                                    xAxisDataWithProjectNewAndCloseBugFromServer.push(item.bug_submit_date); //日期
                                    addNumArrWithProjectNewAndCloseBugFromServer.push(item.add);  //新增
                                    closeNumArrWithProjectNewAndCloseBugFromServer.push(item.close); //关闭

                                });

                                var legendDataWithProjectNewAndCloseBug = ["新增","关闭","项目N新增","项目N关闭"];
                                var xAxisDataWithProjectNewAndCloseBug = xAxisDataWithProjectNewAndCloseBugFromServer;

                                addNumArrWithProjectNewAndCloseBug = addNumArrWithProjectNewAndCloseBugFromServer;
                                closeNumArrWithProjectNewAndCloseBug = closeNumArrWithProjectNewAndCloseBugFromServer;

                                var seriesDataJsonWithProjectNewAndCloseBug = {"add": addNumArrWithProjectNewAndCloseBug, "close": closeNumArrWithProjectNewAndCloseBug};


                                json_obj.legendData = legendDataWithProjectNewAndCloseBug;
                                json_obj.xAxisData = xAxisDataWithProjectNewAndCloseBug;
                                json_obj.seriesDataJson = seriesDataJsonWithProjectNewAndCloseBug;

                            },error:function(){
                                console.log("获取后台数据失败");
                            }
                        });

                var json_str = JSON.stringify(json_obj);
                console.log('获取12级别bug,折线图参数，返回的json_str=', json_str);
                return json_str;
            }


            //3-1）3）项目维度，按时间（时间可自定义），按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭曲线
            function renderMapWithProjectByTimeAddBugAddAndClose(legendData, xAxisData, seriesDataJson){
                    //先清空div中的数据 第一种：
                    document.getElementById('AddBugAddAndCloseStatusMapWithProject').innerHTML = "";
                    //第二种：$('#bigDiv').html("");

                    var chart;
                    var myChart;
                    var option;

                    require([
                        'echarts'/*, 'map/js/china' */
                    ], function (echarts) {

                        var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'cross',
                                    crossStyle: {
                                        color: '#999'
                                    }
                                }
                            },
                            toolbox: {
                                feature: {
                                    dataView: {show: true, readOnly: false},
                                    magicType: {show: true, type: ['line', 'bar']},
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            legend: {
                                //data:['1808','LJG','ZG','test']
                                data: legendData,
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    //data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
                                    data: xAxisData,
                                    axisPointer: {
                                        type: 'shadow'
                                    }
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        //formatter: '{value} ml'
                                        formatter: '{value} 个'
                                    }
                                },
                                {
                                    type: 'value',
                                    name: 'bug数量',
                                    min: 0,
                                    max: 500,
                                    interval: 100,
                                    axisLabel: {
                                        formatter: '{value} 个 '
                                    }
                                }

                            ],
                            series: [
                                {
                                    name:legendData[0],
                                    type:'line',
                                    //data:[22,26,67,70,71,77,83,84,150,153,179,208,219,220,257,267,268,269]
                                    data:seriesDataJson['totoal12']
                                },
                                {
                                    name:legendData[1],
                                    type:'line',
                                    //data:[0,0,0,0,0,0,0,0,8,9,9,12,13,13,16,16,16,17]
                                    data:seriesDataJson['add12']
                                },
                                {
                                    name:legendData[2],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[22,26,67,70,71,76,82,83,136,138,164,189,197,198,226,236,237,237]
                                    data:seriesDataJson['close12']
                                },
                                {
                                    name:legendData[3],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,0,0,1,1,1,1,12,2,2,4,4,4,4]
                                    data:seriesDataJson['regression12']
                                },
                                {
                                    name:legendData[4],
                                    type:'line',
                                    yAxisIndex: 1,
                                    //data:[0,0,0,0,0,1,1,1,5,5,5,6,7,7,11,11,11,11]
                                    data:seriesDataJson['delay12']
                                }
                            ]
                        };

                        chart = myChart = testHelper.create(echarts, 'AddBugAddAndCloseStatusMapWithProject', {
                            option: option,
                            //title: '3）项目维度，按时间（时间可自定义），按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭曲线；'
                        });
                    });
            }


            //--------------------------------------- 定义相关方法 end -------------------------------------------------------

            //--------------------------------------- 执行脚本 start -------------------------------------------------------
            //渲染分页
            renderElement();

            //渲染日历
            renderLaydate("startTime");
            renderLaydate("endTime");


            //渲染table相关方法
                //每日数据
            //renderTable('tableForDrawMapWithProject', '/getTableForDrawMapWithProject', '2020-01-01', '2020-06-10', 'tableForDrawMapWithProjectId');
                //每日累加数据
            //renderTable('tableForDrawMapWithProjectEverydaySum', '/getTableForDrawMapWithProjectEverydaySum', '2020-01-01', '2020-06-10', 'tableForDrawMapWithProjectEverydaySumId');

            //渲染form相关方法
            layui.use('form',function () {
                var form = layui.form;
                var $ = layui.jquery;

                //监听提交
                  form.on('submit(search)', function(data){ // 对应lay-filter
                        startTimeFromForm = document.getElementById('startTime').value;
                        endTimeFromForm =  document.getElementById('endTime').value;
                        //timeDifference =  document.getElementById('timeDifference').value;
                        timeDifference = $('#selector option:selected') .val();  // 定位id


                        console.log("开始时间=" + startTimeFromForm);
                        console.log("结束时间=" + endTimeFromForm);
                        console.log("点击了搜索按钮");
                        console.log("select value===" + timeDifference);

                        //渲染table - 每天数据
                        renderTable('tableForDrawMapWithProject', '/getTableForDrawMapWithProject', startTimeFromForm, endTimeFromForm, 'tableForDrawMapWithProjectId');
                        //渲染table - 每天相对昨天 增长/关闭情况
                        console.log("渲染table - 每天相对昨天 增长/关闭情况");
                        renderTableForDrawMapWithProjectEverydayNewBugAddAndClose('tableForDrawMapWithProjectEverydayNewBugAddAndClose', '/getTableForDrawMapWithProjectEverydayNewBugAddAndClose', startTimeFromForm, endTimeFromForm, timeDifference, 'tableForDrawMapWithProjectEverydayNewBugAddAndCloseId');
                        //渲染table - 每天累加数据
                        renderTable('tableForDrawMapWithProjectEverydaySum', '/getTableForDrawMapWithProjectEverydaySum', startTimeFromForm, endTimeFromForm, 'tableForDrawMapWithProjectEverydaySumId');

                        /*
                        $.ajax({
                            url: "/getTableForDrawMapWithProjectEverydaySum",
                            method: "get",
                            data:{"startTime":startTimeFromForm,"endTime":endTimeFromForm},
                            datatype:"json",
                            success:function(josnstr){//jsonstr 格式
                                console.log("获取后台数据成功，解析数据");
                                console.log("获取后台数据成功，解析数据datas="+ josnstr);
                                console.log("获取后台数据成功，解析数据datas.type="+ typeof(josnstr));
                                console.log("jsonstringfy==" + JSON.stringify(josnstr.field));
                                returnDataJson = $.parseJSON(josnstr);
                                console.log("，returnDataJson="+ returnDataJson);
                                console.log("，returnDataJson.type="+ typeof(returnDataJson));

                                //获取渲染折线图所需数据
                                    //all bug
                                var xAxisDataFromServer = [];
                                totoalNumArrFromServer = [];
                                addNumArrFromServer = [];
                                closeNumArrFromServer = [];
                                regressionNumArrFromServer = [];
                                delayNumArrFromServer = [];
                                    //12级bug参数
                                var xAxisDataWithProject12BugFromServer = [];
                                var totoalNumArrWithProject12BugFromServer = [];
                                var addNumArrWithProject12BugFromServer = [];
                                var closeNumArrWithProject12BugFromServer = [];
                                var regressionWithProject12BugNumArrFromServer = [];
                                var delayNumArrWithProject12BugFromServer = [];

                                $.each(returnDataJson.data,function (index, item) {
                                    console.log('i+item=' + index + " "+item.add);
                                    xAxisDataFromServer.push(item.bug_submit_date); //日期
                                    totoalNumArrFromServer.push(item.totalNum); //总数
                                    addNumArrFromServer.push(item.add); //新增
                                    closeNumArrFromServer.push(item.close); //关闭
                                    console.log(totoalNumArrFromServer);
                                    regressionNumArrFromServer.push(item.regression); //回归
                                    delayNumArrFromServer.push(item.delay); //延迟

                                    //1-2bug
                                    xAxisDataWithProject12BugFromServer.push(item.bug_submit_date); //日期
                                    totoalNumArrWithProject12BugFromServer.push(item.total12); //总数
                                    addNumArrWithProject12BugFromServer.push(item.add12);  //新增
                                    closeNumArrWithProject12BugFromServer.push(item.close12); //关闭
                                    regressionWithProject12BugNumArrFromServer.push(item.regression12); //回归
                                    delayNumArrWithProject12BugFromServer.push(item.delay12); //延迟
                                });
                                console.log("x轴数组" + xAxisData);

                                var legendData = ['总数','新增','关闭','回归','延迟'];
                                var xAxisData = xAxisDataFromServer;
                                totoalNumArr = totoalNumArrFromServer;
                                addNumArr = addNumArrFromServer;
                                closeNumArr = closeNumArrFromServer;
                                regressionNumArr = regressionNumArrFromServer;
                                delayNumArr = delayNumArrFromServer;

                                var seriesDataJson = {"totoalNum": totoalNumArr, "add": addNumArr, "close": closeNumArr, "regression": regressionNumArr, "delay": delayNumArr};
                                console.log('json类型= ',typeof(seriesDataJson) );
                                renderMapWithProjectByTimeAllBug(legendData, xAxisData, seriesDataJson);
                                //1）项目维度，按时间（时间可自定义）统计新增bug、关闭bug、待回归bug等； end

                                //2）项目维度，按时间（时间可自定义）统计新增一、二级新增bug、关闭bug、待回归bug等；

                                var legendDataWithProject12Bug = ['总数(1-2级bug)','新增(1-2级bug)','关闭(1-2级bug)','回归(1-2级bug)','延迟(1-2级bug)'];
                                var xAxisDataWithProject12Bug = xAxisDataWithProject12BugFromServer;
                                totoalNumArrWithProject12Bug = totoalNumArrWithProject12BugFromServer;
                                addNumArrWithProject12Bug = addNumArrWithProject12BugFromServer;
                                closeNumArrWithProject12Bug = closeNumArrWithProject12BugFromServer;
                                regressionNumArrWithProject12Bug = regressionWithProject12BugNumArrFromServer;
                                delayNumArrWithProject12Bug = delayNumArrWithProject12BugFromServer;
                                var seriesDataJsonWithProject12Bug = {"totoal12": totoalNumArrWithProject12Bug, "add12": addNumArrWithProject12Bug, "close12": closeNumArrWithProject12Bug, "regression12": regressionNumArrWithProject12Bug, "delay12": delayNumArrWithProject12Bug};

                                renderMapWithProjectByTime12Bug(legendDataWithProject12Bug, xAxisDataWithProject12Bug, seriesDataJsonWithProject12Bug);


                            },error:function(){
                                console.log("获取后台数据失败");
                            }
                        });
                        */
                        //1. 画全部bug折线图
                            //获取全部bug 折线图参数
                            console.log("画折线图 - all bug 增长/关闭情况");
                            var allBugJsonStr = getRenderMapWithProjectByTimeAllBugArgs(startTimeFromForm, endTimeFromForm);
                            console.log("画折线图 - all bug 增长/关闭情况allBugJsonStr= "+ allBugJsonStr);
                            //转成json格式
                            var allBugJsonObj = $.parseJSON(allBugJsonStr);

                            var allBugLegendData = allBugJsonObj.legendData;
                            var allBugXAxisData = allBugJsonObj.xAxisData;
                            var allBugSeriesDataJson = allBugJsonObj.seriesDataJson;
                            console.log("allBugLegendData=====" + JSON.stringify(allBugLegendData));
                            console.log("allBugXAxisData=====" + JSON.stringify(allBugXAxisData));
                            console.log("allBugSeriesDataJson=====" + JSON.stringify(allBugSeriesDataJson));

                            //renderMapWithProjectByTimeAllBug(allBugLegendData, allBugXAxisData, allBugSeriesDataJson);

                         //2. 画1-2级 bug折线图
                            //获取1-2级bug 折线图参数
                            console.log("画折线图 - 1-2级 bug 增长/关闭情况");
                            var Bug12JsonStr = getRenderMapWithProjectByTime12BugArgs(startTimeFromForm, endTimeFromForm);
                            console.log("画折线图 - 1-2级 bug 增长/关闭情况1-2级 Bug12JsonStr= "+ Bug12JsonStr);
                            //转成json格式
                            var Bug12JsonObj = $.parseJSON(Bug12JsonStr);

                            var Bug12LegendData = Bug12JsonObj.legendData;
                            var Bug12XAxisData = Bug12JsonObj.xAxisData;
                            var Bug12SeriesDataJson = Bug12JsonObj.seriesDataJson;
                            console.log("Bug12LegendData=====" + JSON.stringify(Bug12LegendData));
                            console.log("Bug12XAxisData=====" + JSON.stringify(Bug12XAxisData));
                            console.log("Bug12SeriesDataJson=====" + JSON.stringify(Bug12SeriesDataJson));
                            //renderMapWithProjectByTime12Bug(Bug12LegendData, Bug12XAxisData, Bug12SeriesDataJson);

                         //3. 按照一定时间颗粒度（时间可自定义），绘制新增bug增长曲线和关闭曲线
                            //增bug增长曲线和关闭曲线
                            console.log("画折线图 - 新增bug增长曲线和关闭曲线");
                            var addAndCloseBugJsonStr = getRenderMapWithProjectByTimeAddBugAddAndCloseArgs(startTimeFromForm, endTimeFromForm);
                            console.log("画折线图 - 新增bug增长曲线和关闭曲线 Bug12JsonStr= "+ addAndCloseBugJsonStr);
                            //转成json格式
                            var addAndCloseBugJsonObj = $.parseJSON(addAndCloseBugJsonStr);

                            var addAndCloseBug12LegendData = addAndCloseBugJsonObj.legendData;
                            var addAndCloseXAxisData = addAndCloseBugJsonObj.xAxisData;
                            var addAndCloseSeriesDataJson = addAndCloseBugJsonObj.seriesDataJson;
                            console.log("addAndCloseBug12LegendData=====" + JSON.stringify(addAndCloseBug12LegendData));
                            console.log("addAndCloseXAxisData=====" + JSON.stringify(addAndCloseXAxisData));
                            console.log("addAndCloseSeriesDataJson=====" + JSON.stringify(addAndCloseSeriesDataJson));
                            renderMapWithProjectByTimeAddBugAddAndClose(addAndCloseBug12LegendData, addAndCloseXAxisData, addAndCloseSeriesDataJson);

                        return false;  //页面不跳转

                  });

            });
            //layui.uer('form') end

            //渲染折线图相关
            /*
            var legendData = ['总数','新增','关闭','回归','延迟'];
            var xAxisData = ['2020-01-10','2020-01-13','2020-01-14','2020-01-15','2020-02-14','2020-02-18','2020-02-19'
                                          ,'2020-02-25','2020-03-18','2020-03-26','2020-03-30','2020-04-01','2020-04-02'
                                          ,'2020-04-07','2020-04-13','2020-04-16','2020-05-13','2020-06-10'];
            totoalNumArr = [22,26,67,70,71,77,83,84,150,153,179,208,219,220,257,267,268,269];
            addNumArr = [0,0,0,0,0,0,0,0,8,9,9,12,13,13,16,16,16,17];
            closeNumArr = [22,26,67,70,71,76,82,83,136,138,164,189,197,198,226,236,237,237];
            regressionNumArr = [0,0,0,0,0,0,0,1,1,1,1,12,2,2,4,4,4,4];
            delayNumArr = [0,0,0,0,0,1,1,1,5,5,5,6,7,7,11,11,11,11];

            var seriesDataJson = {"totoalNum": totoalNumArr, "add": addNumArr, "close": closeNumArr, "regression": regressionNumArr, "delay": delayNumArr};
            console.log('json类型= ',typeof(seriesDataJson) );
            renderMapWithProjectByTimeAllBug(legendData, xAxisData, seriesDataJson)

             */




            //--------------------------------------- 执行脚本 start -------------------------------------------------------

        </script>

    </body>
</html>
